# video-frames-mcp

## What this is
An MCP (Model Context Protocol) server that wraps `ffmpeg` and `ffprobe`, giving AI assistants the ability to extract frames (with OCR), get video metadata, and cut clips from video files. **It returns extracted frames as inline base64 images**, allowing vision-capable models to see the content immediately.

Repository: https://github.com/eequaled/frames-mcp

## How to integrate it

### Prerequisites
- Node.js 18+ must be installed
- `ffmpeg` must be installed and in PATH (`winget install ffmpeg` on Windows, `brew install ffmpeg` on macOS, `apt install ffmpeg` on Linux)

### Installation
The easiest way is via `npx` (which handles the package on the fly):
```bash
npx -y @eequaled/frames-mcp
```

### Adding to any MCP client
The universal config pattern is:
```json
{
  "mcpServers": {
    "video-frames": {
      "command": "npx",
      "args": ["-y", "@eequaled/frames-mcp"]
    }
  }
}
```

**Cursor**: Settings → Features → MCP → Add New MCP Server → Type: command, Command: `npx -y @eequaled/frames-mcp`

**Claude Desktop** (`%APPDATA%\Claude\claude_desktop_config.json` on Windows, `~/Library/Application Support/Claude/claude_desktop_config.json` on macOS): Add to `mcpServers` object as shown above.

**Roo Code** (`%APPDATA%\Code\User\globalStorage\roovscode.roo-cline\settings\cline_mcp_settings.json`): Add to `mcpServers` object.

**Cline** (`%APPDATA%\Code\User\globalStorage\saoudrizwan.claude-dev\settings\cline_mcp_settings.json`): Add to `mcpServers` object.

## Available Tools

### get_video_info
Returns metadata about a video file.
- **Input**: `videoPath` (string, absolute path)
- **Output**: JSON with `duration` (seconds), `width`, `height`, `fps`, `codec`, `bitrate`, `frameCount`
- **Example**: "What is the duration and resolution of /path/to/video.mp4?"

### extract_frame
Extracts a single frame from a video as an image, and automatically runs OCR to extract any text in the frame.
- **Input**: `videoPath` (string), `outputPath` (optional string, must end in .jpg/.png), `timestamp` (optional, HH:MM:SS or seconds), `frameIndex` (optional, 0-indexed integer)
- **Output**: Base64 image data AND extracted OCR text content. If `outputPath` is provided, also returns the file path.
- **Note**: Omit `outputPath` unless you explicitly want to keep the file on disk (Transient Mode).
- **Example**: "Extract the frame at 1:30 from /path/to/video.mp4"

### extract_multiple_frames
Extracts multiple frames from a video as images. Use `totalFrames` constraint for "Smart Sampling" instead of dumping everything.
- **Input**: `videoPath` (string), `outputDir` (optional string, directory path), `intervalSeconds` (optional, default 1), `totalFrames` (optional, overrides intervalSeconds), `format` (optional, "jpg" or "png", default "jpg")
- **Output**: Multiple inline base64 images.
- **Note**: Omit `outputDir` unless you explicitly want to keep the files on disk (Transient Mode).
- **Example**: "Extract 10 frames evenly distributed from /path/to/video.mp4"

### extract_clip
Cuts a segment from a video without re-encoding (fast, keyframe-aligned).
- **Input**: `videoPath` (string), `outputPath` (string, must end in a video extension), `startTime` (string, HH:MM:SS or seconds), `endTime` (optional string), `duration` (optional number, seconds). Must provide either `endTime` or `duration`.
- **Output**: Path to the extracted clip file
- **Example**: "Cut a 30-second clip starting at 5:00 from /path/to/video.mp4 and save it to /output/clip.mp4"

## Important notes for AI agents
- **Inline Image Returns**: Tools return `ImageContent` blocks (base64) directly.
- **OCR text**: `extract_frame` includes `[OCR Extracted Text]`. Include this directly in your analysis.
- **Always use absolute paths** — relative paths will not reliably resolve
- **Windows paths in JSON**: use double backslashes: `C:\\Users\\you\\video.mp4`
- The server processes files locally; it does not upload or stream video anywhere
- Supported video formats: mp4, mkv, avi, mov, webm, flv, wmv, m4v
- Supported image output formats: jpg, jpeg, png, bmp, webp
- `extract_clip` uses stream copy (no re-encoding) — cuts snap to the nearest keyframe, so they may be slightly off from the exact timestamp
- The server will exit with an error if `ffmpeg` is not found on PATH

## Verification
To verify the server is working, run:
```bash
npx -y @eequaled/frames-mcp
# Server should print: "Video Frames MCP server running..."
```
